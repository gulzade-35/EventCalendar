@model EventCalendar.Entities.Category

@{
    ViewBag.Title = "CreateCategory";
    Layout = "~/Views/Layout/Index.cshtml";
}

<div class="content-wrapper">
    <section class="content-header">
        <div class="container-fluid">
        </div>
    </section>

    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="card card-primary">
                        <div class="card-header">
                            <h3 class="card-title">Yeni Kategori</h3>
                        </div>

                        @using (Html.BeginForm("CreateCategory", "Category", FormMethod.Post))
                        {
                            <div class="card-body">
                                <div class="form-group">
                                    @Html.LabelFor(x => x.CategoryName, "Kategori Adı")
                                    @Html.TextBoxFor(x => x.CategoryName, new { @class = "form-control", placeholder = "Kategori adını girin" })
                                </div>

                                <div class="form-group">
                                    <label>Kategori Rengi Seçin</label>
                                    @Html.HiddenFor(x => x.CategoryColor, new { id = "selected_color_input" })

                                    <div class="row">
                                        <div class="col-12">
                                            <div class="btn-group btn-group-toggle" data-toggle="buttons" style="display: flex; flex-wrap: wrap; gap: 10px;">

                                                <label class="btn btn-default text-center color-option" data-color="bg-primary">
                                                    <input type="radio" name="color_opt" autocomplete="off">
                                                    Mavi <br> <i class="fas fa-circle fa-2x text-primary"></i>
                                                </label>

                                                <label class="btn btn-default text-center color-option" data-color="bg-success">
                                                    <input type="radio" name="color_opt" autocomplete="off">
                                                    Yeşil <br> <i class="fas fa-circle fa-2x text-success"></i>
                                                </label>

                                                <label class="btn btn-default text-center color-option" data-color="bg-warning">
                                                    <input type="radio" name="color_opt" autocomplete="off">
                                                    Sarı <br> <i class="fas fa-circle fa-2x text-warning"></i>
                                                </label>

                                                <label class="btn btn-default text-center color-option" data-color="bg-danger">
                                                    <input type="radio" name="color_opt" autocomplete="off">
                                                    Kırmızı <br> <i class="fas fa-circle fa-2x text-danger"></i>
                                                </label>

                                                <label class="btn btn-default text-center color-option" data-color="bg-info">
                                                    <input type="radio" name="color_opt" autocomplete="off">
                                                    Turkuaz <br> <i class="fas fa-circle fa-2x text-info"></i>
                                                </label>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Kaydet</button>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<style>
    /* Seçili kutunun etrafına kalın çerçeve ve gölge */
    .selected-color {
        border: 3px solid #333 !important;
        transform: scale(1.1);
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        opacity: 1 !important;
        z-index: 10;
    }

    .color-option {
        transition: all 0.2s ease;
        opacity: 0.7;
        cursor: pointer;
        margin: 5px;
    }
</style>

@section Scripts{
    <script>
    $(document).ready(function() {

        // 1️⃣ Eğer modelde renk varsa al, yoksa ilk renk kutusunu seç
        var currentColor = '@Model?.CategoryColor';
        if(!currentColor) {
            currentColor = $('.color-option').first().data('color');
        }

        $('.color-option').each(function() {
            if ($(this).data('color') === currentColor) {
                $(this).addClass('selected-color');
                $('#selected_color_input').val(currentColor);
            }
        });

        // 2️⃣ Kullanıcı renk seçtiğinde
        $('.color-option').click(function() {
            $('.color-option').removeClass('selected-color');
            $(this).addClass('selected-color');

            $('#selected_color_input').val($(this).data('color'));
        });
    });
    </script>
}
